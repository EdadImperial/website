---
const pathname = new URL(Astro.request.url).pathname;
const currentPath = pathname.split("/")[1]; // remove the first "/"
const base = "text-white text-xl font-bold uppercase inline-block px-3 py-3 rounded hover:bg-yellow-500 hover:text-black";
const active = "text-gray-900 text-xl font-bold uppercase inline-block px-3 py-3 rounded bg-yellow-400";
---

<nav>
    <div class="pt-6 pb-10 px-7 mx-auto">
        <div class="flex justify-between">
            <div class="flex space-x-5">
                <!--- logo -->
                <div>
                    <svg class="h-12 w-12" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" id="svg379" x="0" y="0" version="1.1" viewBox="0 0 530.7 853.52"><g id="Fondo" transform="translate(-259.65 -95.66)"><g id="XMLID_00000065034318559081794160000009078146070668120750_"><g id="g308"><radialGradient id="SVGID_1_" cx="413.17" cy="699.446" r="549.425" gradientUnits="userSpaceOnUse"><stop id="stop297" offset="0" stop-color="#797979"/><stop id="stop299" offset=".215" stop-color="#5c5c5c"/><stop id="stop301" offset=".678" stop-color="#141414"/><stop id="stop303" offset=".786" stop-color="#020202"/></radialGradient><path id="polygon306" fill="url(#SVGID_1_)" d="M313.15 193.24h423.7v531.94L525 887.02 313.15 725.18z"/></g></g></g><g id="Layer_1" transform="translate(-259.65 -95.66)"><radialGradient id="SVGID_00000111893585422917142450000001316421344789999806_" cx="415.043" cy="697.357" r="564.357" fx="224.581" fy="995.47" gradientUnits="userSpaceOnUse"><stop id="stop316" offset="0" stop-color="#fc0"/><stop id="stop318" offset=".423" stop-color="#ffca02"/><stop id="stop320" offset=".576" stop-color="#ffc308"/><stop id="stop322" offset=".685" stop-color="#ffb813"/><stop id="stop324" offset=".772" stop-color="#ffa723"/><stop id="stop326" offset=".816" stop-color="#ff9b2e"/></radialGradient><path id="path329" fill="url(#SVGID_00000111893585422917142450000001316421344789999806_)" d="M684.21 115.66v4.08c0 11.05-8.95 20-20 20h-66.14c-11.05 0-20-8.95-20-20v-4.08c0-11.05-8.95-20-20-20h-66.14c-11.05 0-20 8.95-20 20v4.08c0 11.05-8.95 20-20 20h-66.14c-11.05 0-20-8.95-20-20v-4.08c0-11.05-8.95-20-20-20h-66.14c-11.05 0-20 8.95-20 20v626.09c0 6.23 2.91 12.11 7.86 15.89l245.35 187.43a19.984 19.984 0 0 0 24.28 0l245.35-187.43c4.95-3.78 7.86-9.66 7.86-15.89V115.66c0-11.05-8.95-20-20-20h-66.14c-11.05 0-20 8.95-20 20zM512.86 877.74 321.01 731.18a20.003 20.003 0 0 1-7.86-15.89V213.24c0-11.05 8.95-20 20-20h383.7c11.05 0 20 8.95 20 20v502.05c0 6.23-2.91 12.11-7.86 15.89L537.14 877.74a19.984 19.984 0 0 1-24.28 0zm170.49-575.46v-45.54c0-5.52-4.48-10-10-10h-43.34c-5.52 0-10 4.48-10 10v24.08c0 5.52-4.48 10-10 10h-43.34c-5.52 0-10-4.48-10-10v-24.08c0-5.52-4.48-10-10-10h-43.34c-5.52 0-10 4.48-10 10v24.08c0 5.52-4.48 10-10 10h-43.34c-5.52 0-10-4.48-10-10v-24.08c0-5.52-4.48-10-10-10h-43.34c-5.52 0-10 4.48-10 10v45.54c0 2.65 1.05 5.2 2.93 7.07l57.48 57.48a9.99 9.99 0 0 1 2.93 7.07v222.15c0 2.65-1.05 5.2-2.93 7.07l-57.48 57.48a9.99 9.99 0 0 0-2.93 7.07v21.05c0 5.52 4.48 10 10 10h296.7c5.52 0 10-4.48 10-10v-21.05c0-2.65-1.05-5.2-2.93-7.07l-57.48-57.48a9.99 9.99 0 0 1-2.93-7.07V373.9c0-2.65 1.05-5.2 2.93-7.07l57.48-57.48a9.99 9.99 0 0 0 2.93-7.07zm-95.71 163.84h-41.76V487h20.88v62.64h-20.88v-20.88h-41.76v20.88h-20.88V487h20.88v-20.88h-41.76v-41.76h41.76v41.76h41.76v-41.76h41.76z"/></g></svg>
                </div>

                <!--- primary nav --->
                <div class="hidden md:flex items-center space-x-5">
                    <a class={currentPath === "" ? active : base} href="/">Inicio</a>
                    <a class={currentPath === "wiki" ? active : base} href="/wiki">Wiki</a>
                    <a class={currentPath === "tienda" ? active : base} href="/tienda">Tienda</a>
                </div>
            </div>

            <!--- ip -->
            <div class="hidden md:flex items-center">
                <a id="ip" class="text-gray-900 text-xl font-bold uppercase inline-block px-3 py-2 rounded bg-yellow-400" href="javascript:void(0)">play.edadimperial.com</a>
            </div>

            <!--- mobile button --->
            <div class="md:hidden flex items-center text-white">
                <button class="mobile-menu-button"
                    ><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!--- mobile nav --->
    <div class="mobile-menu hidden md:hidden">
        <div class="pt-4 pl-5">
            <a class="block px-3 py-3 text-white text-xl font-bold uppercase" href="/">Inicio</a>
            <a class="block px-3 py-3 text-white text-xl font-bold uppercase" href="/wiki">Wiki</a>
            <a class="block px-3 py-3 text-white text-xl font-bold uppercase" href="/tienda">Tienda</a>
        </div>
    </div>
</nav>

<style>
    .active {
        background-color: #eab308;
        color: #1a202c;
    }
</style>

<script>
    const ip = document.getElementById("ip")!;
    ip.addEventListener("click", copyToClipboard);
    function copyToClipboard() {
        var ip = "play.edadimperial.com";
        navigator.clipboard.writeText(ip);
        alert("Â¡IP copiada al portapapeles!");
    }

    //mobile menu
    const mobileMenuButton = document.querySelector("button.mobile-menu-button")!;
    const mobileMenu = document.querySelector(".mobile-menu")!;
    mobileMenuButton.addEventListener("click", () => {
        mobileMenu.classList.toggle("hidden");
    });
</script>
